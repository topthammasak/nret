!function(e){var t=new Array,n=new Array,r=function(){},o=0,a={splashVPos:"35%",loaderVPos:"75%",splashID:"#jpreContent",showSplash:!0,showPercentage:!0,autoClose:!0,closeBtnText:"Start!",onetimeLoad:!1,debugMode:!1,splashFunction:function(){}},i=function(){if(a.onetimeLoad){for(var e,t=document.cookie.split("; "),n=0;e=t[n]&&t[n].split("=");n++)if("jpreLoader"===e.shift())return e.join("=");return!1}return!1},d=function(e){if(a.onetimeLoad){var t=new Date;t.setDate(t.getDate()+e);var n=null==e?"":"expires="+t.toUTCString();document.cookie="jpreLoader=loaded; "+n}},s=function(){if(jOverlay=e('<div id="jpreOverlay"></div>'),e("#jpreOverlay").length?jOverlay=e("#jpreOverlay"):jOverlay.appendTo("body"),a.showSplash){jContent=e("<div></div>").attr("id","jpreSlide").appendTo(jOverlay);var t=e(window).width()-e(jContent).width();e(jContent).css({position:"absolute",top:a.splashVPos,left:Math.round(50/e(window).width()*t)+"%"}),e(jContent).html(e(a.splashID).wrap("<div/>").parent().html()),e(a.splashID).remove(),a.splashFunction()}jLoader=e('<div id="jpreLoader"></div>'),e("#jpreLoader").length?jLoader=e("#jpreLoader"):jLoader.appendTo(jOverlay);var n=e(window).width()-e(jLoader).width();e(jLoader).css({position:"absolute",top:a.loaderVPos,left:Math.round(50/e(window).width()*n)+"%"}),jBar=e('<div id="jpreBar"></div>'),e("#jpreBar").length?jBar=e("#jpreBar"):jBar.appendTo(jLoader),a.showPercentage&&(jPer=e('<div id="jprePercentage"></div>'),e("#jprePercentage").length?jPer=e("#jprePercentage"):jPer.appendTo(jLoader)),a.autoclose||(jButton=e("<div></div>").attr("id","jpreButton").on("click",function(){u()}).css({position:"relative",height:"100%"}).appendTo(jLoader).text(a.closeBtnText).hide())},l=function(n){e(n).find("*:not(script)").each(function(){var n="";if(-1==e(this).css("background-image").indexOf("none")&&-1==e(this).css("background-image").indexOf("-gradient")){if(n=e(this).css("background-image"),-1!=n.indexOf("url")){var r=n.match(/url\((.*?)\)/);n=r[1].replace(/\"/g,"")}}else"img"==e(this).get(0).nodeName.toLowerCase()&&"undefined"!=typeof e(this).attr("src")&&(n=e(this).attr("src"));n.length>0&&t.push(n)})},c=function(){for(var e=0;e<t.length;e++)h(t[e])},h=function(t){var r=new Image;e(r).load(function(){p()}).error(function(){n.push(e(this).attr("src")),p()}).attr("src",t)},p=function(){o++;var n=Math.round(o/t.length*100);if(e(jBar).stop().animate({width:n+"%"},500,"linear"),a.showPercentage&&e(jPer).text(n+"%"),o>=t.length){if(o=t.length,d(),a.showPercentage&&e(jPer).text("100%"),a.debugMode){j()}e(jBar).stop().animate({width:"100%"},500,"linear",function(){a.autoClose?u():e(jButton).fadeIn(1e3)})}},u=function(){e(jOverlay).fadeOut(800,function(){e(jOverlay).remove(),r()})},j=function(){if(n.length>0){var e="ERROR - IMAGE FILES MISSING!!!\n\r";e+=n.length+" image files cound not be found. \n\r",e+="Please check your image paths and filenames:\n\r";for(var t=0;t<n.length;t++)e+="- "+n[t]+"\n\r";return!0}return!1};e.fn.jpreLoader=function(t,n){return t&&e.extend(a,t),"function"==typeof n&&(r=n),e("body").css({display:"block"}),this.each(function(){i()?(e(a.splashID).remove(),r()):(s(),l(this),c())})}}(jQuery);