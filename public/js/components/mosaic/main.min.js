function Mosaic(){this.name="mosaic",this.width=0,this.height=0,this.minH=0,this.min=0,this.max=0}var Mosaic;define(["CollagePlus"],function(){return Mosaic=new Mosaic}),Mosaic.prototype={init:function(i){Mosaic.target=$(i),Mosaic.width=Mosaic.target.width(),Mosaic.minH=Mosaic.target.data("min-height"),Mosaic.resize(),$(window).resize(function(){Mosaic.resize(),console.log("RESIZE")})},resize:function(){var i,t,a=0,s=0,e=[];$.each(Mosaic.target,function(o,n){i=$(n),t=i.find("img"),s=0,e=[],a=t.length,$.each(t,function(i,t){{var o=$(t),n=o.data("type");o.data("height"),o.data("width")}void 0===n?(s>Mosaic.width&&(Mosaic.resizeImages(e,s),s=0,e=[]),e.push(o),o.css({height:Mosaic.minH}),s+=o.outerWidth()):o.css({width:Mosaic.width}),a--}),Mosaic.resizeImages(e,s)})},resizeImages:function(i,t){var a,s,e=Mosaic.minH/t,o=Math.round(Mosaic.width*e),n=0;if($.each(i,function(i,t){a=$(t),s=a.css({height:o}).outerWidth(),n+=s}),n!==Mosaic.width){var h=Mosaic.width-n;a.css({width:s+h})}},ratioFit:function(){var i=Math.min(Masterplan.content_w/Masterplan.image_w,Masterplan.content_h/Masterplan.image_h);return{width:Math.floor(Masterplan.image_w*i),height:Math.floor(Masterplan.image_h*i)}}};